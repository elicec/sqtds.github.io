<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>蜻蜓点水</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="蜻蜓点水">
<meta property="og:url" content="http://sqtds.github.io/categories/java/index.html">
<meta property="og:site_name" content="蜻蜓点水">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="蜻蜓点水">
<meta name="twitter:description">
  
    <link rel="alternative" href="/atom.xml" title="蜻蜓点水" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  <script src="http://libs.baidu.com/jquery/1.9.0/jquery.js"></script>
  
<script type="text/javascript">
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?1bd1f966e3148e2b59e4b159067ad372";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			<img lazy-src="/img/photo.jpg" class="js-avatar">
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">sqtds</a></h1>
		</hgroup>

		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
							<li><a href="/tags/随笔">随笔</a></li>
				        
							<li><a href="/about">关于我</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/sqtds" title="github">github</a>
					        
								<a class="rss" target="_blank" href="/atom.xml" title="rss">rss</a>
					        
								<a class="mail" target="_blank" href="/sqtds@163.com" title="mail">mail</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/android/" style="font-size: 16.67px;">android</a><a href="/tags/antlr4/" style="font-size: 18.33px;">antlr4</a><a href="/tags/hadoop/" style="font-size: 11.67px;">hadoop</a><a href="/tags/impala/" style="font-size: 10px;">impala</a><a href="/tags/java核心系列/" style="font-size: 20px;">java核心系列</a><a href="/tags/java源码阅读/" style="font-size: 13.33px;">java源码阅读</a><a href="/tags/linux/" style="font-size: 15px;">linux</a><a href="/tags/linux命令/" style="font-size: 10px;">linux命令</a><a href="/tags/mondrian/" style="font-size: 18.33px;">mondrian</a><a href="/tags/netty/" style="font-size: 10px;">netty</a><a href="/tags/nosql/" style="font-size: 11.67px;">nosql</a><a href="/tags/spring/" style="font-size: 15px;">spring</a><a href="/tags/tomcat/" style="font-size: 10px;">tomcat</a><a href="/tags/分布式/" style="font-size: 10px;">分布式</a><a href="/tags/异常/" style="font-size: 10px;">异常</a><a href="/tags/性能/" style="font-size: 10px;">性能</a><a href="/tags/数据库/" style="font-size: 15px;">数据库</a><a href="/tags/计算机原理/" style="font-size: 16.67px;">计算机原理</a><a href="/tags/随笔/" style="font-size: 10px;">随笔</a>
					</div>
				</section>
				
				
				

				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">sqtds</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="/img/photo.jpg" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">sqtds</h1>
			</hgroup>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
					<li><a href="/tags/随笔">随笔</a></li>
		        
					<li><a href="/about">关于我</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/sqtds" title="github">github</a>
			        
						<a class="rss" target="_blank" href="/atom.xml" title="rss">rss</a>
			        
						<a class="mail" target="_blank" href="/sqtds@163.com" title="mail">mail</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap">
  
    <article id="post-GC-turing" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/08/01/GC-turing/" class="article-date">
  	<time datetime="2015-08-01T12:42:41.000Z" itemprop="datePublished">8月 1 2015</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/01/GC-turing/">GC调优总结</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="一，概述">一，概述</h2><p>twitter的一位工程师说过一句话，“Biggest threat  to responsiveness in the JVM is the garbage collector”，可见垃圾收集器的重要性。下面，我将总结一下GC调优的方方面面，希望以后在这里能少走弯路。</p>
<h2 id="二，监控命令">二，监控命令</h2><h3 id="1，jdk命令">1，jdk命令</h3><h4 id="1-1_jps_进程状态信息">1.1 jps 进程状态信息</h4><pre><code>jps [options] [hostid]
-<span class="ruby">q 不输出类名、<span class="constant">Jar</span>名和传入main方法的参数
</span>-<span class="ruby">m 输出传入main方法的参数
</span>-<span class="ruby">l 输出main类或<span class="constant">Jar</span>的全限名
</span>-<span class="ruby">v 输出传入<span class="constant">JVM</span>的参数</span>
</code></pre><h4 id="1-2_jstack_线程堆栈信息">1.2 jstack 线程堆栈信息</h4><pre><code>jstack [option] pid
-<span class="ruby">l long listings，会打印出额外的锁信息，在发生死锁时可以用jstack -l pid来观察锁持有情况
</span>-<span class="ruby">m mixed mode，不仅会输出<span class="constant">Java</span>堆栈信息，还会输出<span class="constant">C</span>/<span class="constant">C</span>++堆栈信息（比如<span class="constant">Native</span>方法）</span>
</code></pre><h4 id="1-3_jmap_堆内存使用状况">1.3 jmap 堆内存使用状况</h4><pre><code>jmap [option] <span class="keyword">pid</span>

jmap -permstat <span class="keyword">pid</span>
打印进程的类加载器和类加载器加载的持久代对象信息，输出：类加载器名称、对象是否存活（不可靠）、对象地址、父类加载器、已加载的类大小等信息

jmap -heap <span class="keyword">pid</span>
查看进程堆内存使用情况，包括使用的GC算法、堆配置参数和各代中堆内存使用情况。

jmap -histo[:live] <span class="keyword">pid</span> 
查看堆内存中的对象数目、大小统计直方图，如果带上live则只统计活对象 （注意：执行此语句会造成Full GC）

jmap -dump:<span class="keyword">format</span>=b,<span class="keyword">file</span>=dumpFile <span class="keyword">pid</span>
</code></pre><h4 id="1-4_jstat_统计监测工具">1.4 jstat 统计监测工具</h4><pre><code><span class="atom">jstat</span> [ <span class="atom">generalOption</span> | <span class="atom">outputOptions</span> <span class="atom">vmid</span> [<span class="atom">interval</span>[<span class="atom">s</span>|<span class="atom">ms</span>] [<span class="atom">count</span>]] ]
<span class="atom">vmid</span>是<span class="name">Java</span>虚拟机<span class="name">ID</span>，在<span class="name">Linux</span>/<span class="name">Unix</span>系统上一般就是进程<span class="name">ID</span>。<span class="atom">interval</span>是采样时间间隔。<span class="atom">count</span>是采样数目。
<span class="atom">root</span>@<span class="atom">ubuntu</span>:/# <span class="atom">jstat</span> -<span class="atom">gc</span> <span class="number">21711</span> <span class="number">250</span> <span class="number">4</span>
 <span class="name">S0C</span>    <span class="name">S1C</span>    <span class="name">S0U</span>    <span class="name">S1U</span>      <span class="name">EC</span>       <span class="name">EU</span>        <span class="name">OC</span>         <span class="name">OU</span>       <span class="name">PC</span>     <span class="name">PU</span>    <span class="name">YGC</span>     <span class="name">YGCT</span>    <span class="name">FGC</span>    <span class="name">FGCT</span>     <span class="name">GCT</span>   
<span class="number">192.0</span>  <span class="number">192.0</span>   <span class="number">64.0</span>   <span class="number">0.0</span>    <span class="number">6144.0</span>   <span class="number">1854.9</span>   <span class="number">32000.0</span>     <span class="number">4111.6</span>   <span class="number">55296.0</span> <span class="number">25472.7</span>    <span class="number">702</span>    <span class="number">0.431</span>   <span class="number">3</span>      <span class="number">0.218</span>    <span class="number">0.649</span>
<span class="number">192.0</span>  <span class="number">192.0</span>   <span class="number">64.0</span>   <span class="number">0.0</span>    <span class="number">6144.0</span>   <span class="number">1972.2</span>   <span class="number">32000.0</span>     <span class="number">4111.6</span>   <span class="number">55296.0</span> <span class="number">25472.7</span>    <span class="number">702</span>    <span class="number">0.431</span>   <span class="number">3</span>      <span class="number">0.218</span>    <span class="number">0.649</span>
<span class="number">192.0</span>  <span class="number">192.0</span>   <span class="number">64.0</span>   <span class="number">0.0</span>    <span class="number">6144.0</span>   <span class="number">1972.2</span>   <span class="number">32000.0</span>     <span class="number">4111.6</span>   <span class="number">55296.0</span> <span class="number">25472.7</span>    <span class="number">702</span>    <span class="number">0.431</span>   <span class="number">3</span>      <span class="number">0.218</span>    <span class="number">0.649</span>
<span class="number">192.0</span>  <span class="number">192.0</span>   <span class="number">64.0</span>   <span class="number">0.0</span>    <span class="number">6144.0</span>   <span class="number">2109.7</span>   <span class="number">32000.0</span>     <span class="number">4111.6</span>   <span class="number">55296.0</span> <span class="number">25472.7</span>    <span class="number">702</span>    <span class="number">0.431</span>   <span class="number">3</span>      <span class="number">0.218</span>    <span class="number">0.649</span>
</code></pre><blockquote>
<p>S0C、S1C、S0U、S1U：Survivor 0/1区容量（Capacity）和使用量（Used）<br>EC、EU：Eden区容量和使用量<br>OC、OU：年老代容量和使用量<br>PC、PU：永久代容量和使用量<br>YGC、YGT：年轻代GC次数和GC耗时<br>FGC、FGCT：Full GC次数和Full GC耗时<br>GCT：GC总耗时</p>
</blockquote>
<h3 id="2,_系统命令">2, 系统命令</h3><h4 id="2-1_top">2.1 top</h4><pre><code>参数： 
H <span class="operator"><span class="keyword">Show</span> <span class="keyword">all</span> threads <span class="keyword">by</span> process
<span class="number">1</span> 显示各个CPU的运行情况</span>
</code></pre><p>关键指标：</p>
<ol>
<li>us%<br> 用户进程CPU使用(us)消耗：正常 65%-70%<br>  过高，表示应用消耗了大部分的CPU。原因通常是大量计算或GC导致。</li>
<li>sy%：<br> 内核CPU使用(sy)消耗:正常 30%-35%<br> 过高，表示OS花费了大量时间在进行线程切换. 原因通常是线程启动过多，并都处于不断阻塞状态或线程状态不断在变化。</li>
</ol>
<p>top命令可以和jstack结合用</p>
<pre><code>top -H –p javaid 
查看某个进程的线程，找到最用cpu最高的线程后，
<span class="built_in">printf</span> <span class="string">'0x%x\n'</span> tid  
转换线程id为<span class="number">16</span>进制
jstack <span class="operator">-l</span> javaid | grep <span class="number">16</span>进制tid    
</code></pre><h4 id="2-2_vmstat">2.2 vmstat</h4><p><img src="/img/2015/gc-turing.png" alt=""><br>关键指标: </p>
<ul>
<li>r(等待和正在运行队列的进程数) 数大于CPU个数， 则有可能出现CPU瓶颈</li>
<li>b(等待IO的进程数) 经常过高， 则io(网络IO/文件IO)消耗严重。</li>
<li>通过应当结合CPU利用率和CPU Load average来判断性能问题。</li>
<li>如果每个CPU的平均load值大于5(load/cpu count)则存在严重的性能问题(无论CPU利用率如何)。</li>
</ul>
<h4 id="2-3_iostat">2.3 iostat</h4><p>查看各硬盘IO负载信息<br><img src="/img/2015/gc-turing-iostat.png" alt=""><br>确定 IO瓶颈重要指标在于 r/s、 w/s 及 rkB/s、 wkB/s，前者为 tps, 后者为吞吐量。<br>IO 操作对时间消耗可从 util% 看出，如将近100%表示 io 请求(tps)过多。<br>await 远远大于 svctm， 说明等待的系统IO处理的队列太长， 则会导致响应时间变慢。</p>
<h4 id="2-4_pidstat">2.4 pidstat</h4><p>各进程/线程对CPU利用率</p>
<h2 id="三，JDK配置参数">三，JDK配置参数</h2><h3 id="1，内存参数">1，内存参数</h3><p><img src="/img/2015/gc-turing-memory.png" alt=""><br><img src="/img/2015/gc-turing-heap.png" alt=""><br>-Xms –Xmx -XX:PermSize -XX:MaxPermSize 最好设置成一样，防止“堆震荡”<br>-XX:SurvivorRatio :设置年轻代中Eden区与Survivor区的大小比值</p>
<h3 id="2，日志参数">2，日志参数</h3><h2 id="四，性能诊断">四，性能诊断</h2><h3 id="OOM">OOM</h3><p>对象未释放</p>
<ul>
<li>查看大对象</li>
</ul>
<h3 id="Full_GC频繁">Full GC频繁</h3><p>对象占用时间太长</p>
<ul>
<li>查看大对象</li>
</ul>
<h3 id="CMS">CMS</h3><p>promotion failed，concurrent mode failure</p>
<ul>
<li>如为内存用完的情况，则dump内存分析；</li>
<li>如为cms gc碎片问题，暂时只能定时执行下jmap –histo:live；</li>
</ul>
<h3 id="StackOverFlow">StackOverFlow</h3><p>打印线程栈</p>
<h3 id="CPU高负荷">CPU高负荷</h3><ul>
<li>查看线程争用，上下文切换</li>
<li>查看线程死锁</li>
</ul>
<h2 id="五，分析工具">五，分析工具</h2><h2 id="六，参考资料">六，参考资料</h2><h3 id="1,http://bluedavy-me/-淘宝林昊对GC调优的分享">1,<a href="http://bluedavy.me/--淘宝林昊对GC调优的分享" target="_blank" rel="external">http://bluedavy.me/--淘宝林昊对GC调优的分享</a></h3><h3 id="2,JVM性能调优监控工具jps、jstack、jmap、jhat、jstat、hprof使用详解">2,<a href="http://my.oschina.net/feichexia/blog/196575" target="_blank" rel="external">JVM性能调优监控工具jps、jstack、jmap、jhat、jstat、hprof使用详解</a></h3>
      
    </div>
    
    <div class="article-info article-info-index">
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java核心系列/">java核心系列</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/java/">java</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>






  
    <article id="post-2015/java-concurrent" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/05/24/2015/java-concurrent/" class="article-date">
  	<time datetime="2015-05-24T08:13:15.000Z" itemprop="datePublished">5月 24 2015</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/05/24/2015/java-concurrent/">java核心系列（十三）—java并发编程</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="并发编程概览">并发编程概览</h2><p><img src="/img/2015/并发编程.png" alt="并发编程"></p>
<h3 id="1,容器">1,容器</h3><p>略</p>
<h3 id="2，协作">2，协作</h3><p>略</p>
<h3 id="3，变量同步">3，变量同步</h3><p>略</p>
<h3 id="4，内存模型">4，内存模型</h3><p>略</p>
<h3 id="5，参考资料">5，参考资料</h3><ul>
<li>《java 并发编程实践》</li>
<li><a href="http://www.infoq.com/cn/articles/java-memory-model-1?utm_source=infoq&amp;utm_medium=related_content_link&amp;utm_campaign=relatedContent_articles_clk" target="_blank" rel="external">深入理解Java内存模型（一）——基础</a></li>
<li><a href="http://www.infoq.com/cn/articles/java-memory-model-2?utm_source=infoq&amp;utm_medium=related_content_link&amp;utm_campaign=relatedContent_articles_clk" target="_blank" rel="external">深入理解Java内存模型（二）——重排序</a></li>
<li><a href="http://www.infoq.com/cn/articles/java-memory-model-3?utm_source=infoq&amp;utm_medium=related_content_link&amp;utm_campaign=relatedContent_articles_clk" target="_blank" rel="external">深入理解Java内存模型（三）——顺序一致性</a></li>
<li><a href="http://www.infoq.com/cn/articles/ftf-java-volatile?utm_source=infoq&amp;utm_medium=related_content_link&amp;utm_campaign=relatedContent_articles_clk" target="_blank" rel="external">聊聊并发（一）——深入分析Volatile的实现原理</a></li>
<li><a href="http://www.infoq.com/cn/articles/java-se-16-synchronized" target="_blank" rel="external">聊聊并发（二）——Java SE1.6中的Synchronized</a></li>
<li><a href="http://www.infoq.com/cn/articles/java-threadPool" target="_blank" rel="external">聊聊并发（三）——JAVA线程池的分析和使用</a></li>
<li><a href="http://www.infoq.com/cn/articles/ConcurrentHashMap?utm_source=infoq&amp;utm_medium=related_content_link&amp;utm_campaign=relatedContent_articles_clk" target="_blank" rel="external">聊聊并发（四）——深入分析ConcurrentHashMap</a></li>
<li><a href="http://www.infoq.com/cn/articles/atomic-operation?utm_source=infoq&amp;utm_medium=related_content_link&amp;utm_campaign=relatedContent_articles_clk" target="_blank" rel="external">聊聊并发（五）——原子操作的实现原理</a></li>
<li><a href="http://www.infoq.com/cn/articles/ConcurrentLinkedQueue?utm_source=infoq&amp;utm_medium=related_content_link&amp;utm_campaign=relatedContent_articles_clk" target="_blank" rel="external">聊聊并发（六）——ConcurrentLinkedQueue的实现原理分析</a></li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java核心系列/">java核心系列</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/java/">java</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>






  
    <article id="post-2015/java-object-size" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/05/23/2015/java-object-size/" class="article-date">
  	<time datetime="2015-05-23T12:57:27.000Z" itemprop="datePublished">5月 23 2015</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/05/23/2015/java-object-size/">java核心系列（十二）-java对象大小</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="对象大小">对象大小</h2><p><img src="/img/2015/java_object_size.png" alt=""></p>
<h3 id="1，64位系统">1，64位系统</h3><p>new java.lang.Object() 占用了 16 bytes<br>new byte[0] 占用了 24 bytes</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line"> <span class="keyword">byte</span> x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span> </span>&#123;</span><br><span class="line"> <span class="keyword">byte</span> y;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>new A() 占用了 24 bytes<br>new B() 占用了 32 bytes= 24+pad A(8)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span> </span>&#123;</span><br><span class="line"> Object obj = <span class="keyword">new</span> Object();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>new C() takes 40 bytes= obj+obj ref +C = 16+8+16</p>
<h3 id="2，参考资料">2，参考资料</h3><ul>
<li><a href="http://www.importnew.com/14948.html" target="_blank" rel="external">一个Java对象到底占多大内存？</a></li>
<li><a href="http://www.infoq.com/presentations/JVM-Performance-Tuning-twitter" target="_blank" rel="external">everything-i-ever-learned-about-jvm-performance-tuning-twitter</a></li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java核心系列/">java核心系列</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/java/">java</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>






  
    <article id="post-2015/java-jmm" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/05/23/2015/java-jmm/" class="article-date">
  	<time datetime="2015-05-23T00:10:03.000Z" itemprop="datePublished">5月 23 2015</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/05/23/2015/java-jmm/">java核心系列（十一）-java内存模型</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="JMM内存概览">JMM内存概览</h2><p><img src="/img/2015/JMM.png" alt=""></p>
<h3 id="参考资料">参考资料</h3><ul>
<li><a href="http://www.importnew.com/1993.html" target="_blank" rel="external">成为JavaGC专家Part I — 深入浅出Java垃圾回收机制</a></li>
<li><a href="&quot;http://www.importnew.com/2057.html&quot;">成为JavaGC专家Part II — 如何监控Java垃圾回收机制 </a></li>
<li><a href="http://www.importnew.com/3146.html" target="_blank" rel="external">成为Java GC专家系列Part III–如何优化Java垃圾回收机制 </a></li>
<li><a href="http://www.importnew.com/3151.html" target="_blank" rel="external">成为Java GC专家（4）—Apache的MaxClients参数详解及其在Tomcat执行FullGC时的影响</a></li>
<li><a href="http://www.importnew.com/13954.html" target="_blank" rel="external">成为Java GC专家（5）—Java性能调优原则</a></li>
<li><a href="http://ju.outofmemory.cn/entry/65368" target="_blank" rel="external">G1垃圾收集器</a></li>
<li><a href="http://ifeve.com/jvm-permgen-where-art-thou/" target="_blank" rel="external">JVM的持久代——何去何从？</a></li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java核心系列/">java核心系列</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/java/">java</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>






  
    <article id="post-2015/java-exception" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/05/17/2015/java-exception/" class="article-date">
  	<time datetime="2015-05-17T04:32:38.000Z" itemprop="datePublished">5月 17 2015</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/05/17/2015/java-exception/">java核心系列（九）—java异常</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="一，概述">一，概述</h2><p><img src="/img/2015/异常.png" alt="异常"></p>
<h2 id="二，参考资料">二，参考资料</h2><ol>
<li>《effective java》</li>
</ol>

      
    </div>
    
    <div class="article-info article-info-index">
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java核心系列/">java核心系列</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/java/">java</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>






  
    <article id="post-2015/java-new-features" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/05/17/2015/java-new-features/" class="article-date">
  	<time datetime="2015-05-17T03:41:32.000Z" itemprop="datePublished">5月 17 2015</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/05/17/2015/java-new-features/">java核心系列（十）-java新特性</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="一，概述">一，概述</h2><p><img src="/img/2015/新特性.png" alt=""></p>
<h2 id="二，泛型">二，泛型</h2><h3 id="2-1_协变">2.1 协变</h3><p>数组是协变的，因为 Integer 是 Number 的子类型，数组类型 Integer[] 是 Number[] 的子类型，因此在任何需要 Number[] 值的地方都可以提供一个 Integer[] 值。另一方面，泛型不是协变的， List<integer> 不是 List<number> 的子类型，试图在要求 List<number> 的位置提供 List<integer> 是一个类型错误。这不算很严重的问题 — 也不是所有人都认为的错误 — 但泛型和数组的不同行为的确引起了许多混乱。</integer></number></number></integer></p>
<h3 id="2-2_类型推断">2.2 类型推断</h3><p>当解析一个泛型方法的调用时，编译器将设法推断类型参数它能达到的最具体类型。 例如，对于下面这个泛型方法：<br><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span>&lt;T&gt; <span class="function">T <span class="title">identity</span><span class="params">(T arg)</span> </span>&#123; <span class="keyword">return</span> arg &#125;;</span><br></pre></td></tr></table></figure></p>
<p>和它的调用：<br><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Integer</span> i = <span class="number">3</span>;</span><br><span class="line">System.<span class="type">out</span>.println(identity(i));</span><br></pre></td></tr></table></figure></p>
<p>编译器能够推断 T 是 Integer、Number、 Serializable 或 Object，但它选择 Integer 作为满足约束的最具体类型。</p>
<h2 id="三，注解">三，注解</h2><p>注解早在J2SE1.5就被引入到Java中，主要提供一种机制，这种机制允许程序员在编写代码的同时可以直接编写元数据。<br>注解基本上可以在Java程序的每一个元素上使用：类，域，方法，包，变量，等等。</p>
<h3 id="3-1_@Retention">3.1 @Retention</h3><p>这个注解注在其他注解上，并用来说明如何存储已被标记的注解。这是一种元注解，用来标记注解并提供注解的信息。可能的值是：</p>
<ul>
<li>SOURCE：表明这个注解会被编译器忽略，并只会保留在源代码中。</li>
<li>CLASS:表明这个注解会通过编译驻留在CLASS文件，但会被JVM在运行时忽略,正因为如此,其在运行时不可见。</li>
<li>RUNTIME：表示这个注解会被JVM获取，并在运行时通过反射获取。</li>
</ul>
<h3 id="3-2_@Target">3.2 @Target</h3><p>这个注解用于限制某个元素可以被注解的类型。例如：</p>
<ul>
<li>ANNOTATION_TYPE 表示该注解可以应用到其他注解上</li>
<li>CONSTRUCTOR 表示可以使用到构造器上</li>
<li>FIELD 表示可以使用到域或属性上</li>
<li>LOCAL_VARIABLE表示可以使用到局部变量上。</li>
<li>METHOD可以使用到方法级别的注解上。</li>
<li>PACKAGE可以使用到包声明上。</li>
<li>PARAMETER可以使用到方法的参数上</li>
<li>TYPE可以使用到一个类的任何元素上。</li>
</ul>
<h3 id="3-3_@Documented">3.3 @Documented</h3><p>被注解的元素将会作为Javadoc产生的文档中的内容。注解都默认不会成为成为文档中的内容。这个注解可以对其它注解使用。</p>
<h3 id="3-4_@Inherited">3.4 @Inherited</h3><p>在默认情况下，注解不会被子类继承。被此注解标记的注解会被所有子类继承。这个注解可以对类使用。</p>
<h3 id="3-5_@Repeatable">3.5 @Repeatable</h3><p>说明该注解标识的注解可以多次使用到同一个元素的声明上。</p>
<h3 id="3-6_@FunctionalInterface">3.6 @FunctionalInterface</h3><p>这个注解表示一个函数式接口元素。函数式接口是一种只有一个抽象方法（非默认）的接口。编译器会检查被注解元素，如果不符，就会产生错误。</p>
<h2 id="四，lambada表达式">四，lambada表达式</h2><h2 id="五，参考资料">五，参考资料</h2><ol>
<li><a href="http://www.ibm.com/developerworks/cn/java/j-jtp04298.html" target="_blank" rel="external">Java 理论与实践: 使用通配符简化泛型使用</a></li>
<li><a href="http://www.ibm.com/developerworks/cn/java/j-jtp01255.html" target="_blank" rel="external">Java 理论和实践: 了解泛型</a></li>
<li><a href="http://www.cnblogs.com/panjun-Donet/archive/2008/09/27/1300609.html" target="_blank" rel="external">java泛型</a></li>
<li><a href="http://www.importnew.com/14227.html" target="_blank" rel="external">Java 注解指导手册 – 终极向导</a></li>
<li><a href="http://www.infoq.com/cn/articles/cf-java-annotation/" target="_blank" rel="external">Java深度历险（六）——Java注解</a></li>
<li><a href="http://www.cnblogs.com/figure9/archive/2014/10/24/4048421.html" target="_blank" rel="external">深入理解Java 8 Lambda（语言篇——lambda，方法引用，目标类型和默认方法）</a></li>
</ol>

      
    </div>
    
    <div class="article-info article-info-index">
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java核心系列/">java核心系列</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/java/">java</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>






  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/categories/java/page/2/">2</a><a class="page-number" href="/categories/java/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/categories/java/page/8/">8</a><a class="extend next" rel="next" href="/categories/java/page/2/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2015 sqtds
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/mobile.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>





<! -- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>



  </div>
</body>
</html>